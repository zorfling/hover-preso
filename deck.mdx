import { themes } from 'mdx-deck';
import { LiveCode } from 'mdx-deck-live-code';

import myThemes from './theme';
import myPrismTheme from './prism-theme';

import './styles.css';

export const theme = {
  ...myThemes,
  ...myPrismTheme,
};

<Header>Hover Conf 2021 Recap - 8 hours of CSS talks in 45 minutes</Header>
<Footer>Chris Colborne - July 2021</Footer>

# Hover Conf 2021

## 8 hours of CSS talks in 45 minutes

### Chris Colborne - July 2021

---

## What's New in CSS 2021

### Adam Argyle, Developer Advocateer, Google

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/adam-argyle.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## 31 features, from risky to stable

<div style={{ display: 'flex', gap: '36px' }}>
  <div>
    <h3>High Risk</h3>
    <ul>
      <li>Conditionals</li>
      <li className="highlight">
        <span>Switch</span>
      </li>
      <li>Relative Units</li>
      <li className="highlight">
        <span>Houdini Layout</span>
      </li>
      <li className="highlight">
        <span>@scope</span>
      </li>
    </ul>
  </div>
  <div>
    <h3>Moderate Risk</h3>
    <ul>
      <li className="highlight">
        <span>@container</span>
      </li>
      <li>Leading Trim</li>
      <li className="highlight">
        <span>Houdini Paint</span>
      </li>
      <li className="highlight">
        <span>@scroll-timeline</span>
      </li>
      <li>Spelling & Grammar</li>
      <li>:target-within</li>
      <li className="highlight">
        <span>@nest</span>
      </li>
      <li className="highlight">
        <span>@layer</span>
      </li>
      <li>Foldables</li>
      <li className="highlight">
        <span>Color 5</span>
      </li>
      <li className="highlight">
        <span>Grid Masonry</span>
      </li>
      <li className="highlight">
        <span>Custom @media</span>
      </li>
    </ul>
  </div>
  <div>
    <h3>Low Risk</h3>
    <ul>
      <li>Color 4</li>
      <li>HD Color</li>
      <li className="highlight">
        <span>@property</span>
      </li>
      <li>Content Visibility</li>
      <li className="highlight">
        <span>aspect-ratio</span>
      </li>
      <li>::marker</li>
      <li className="highlight">
        <span>Conic Gradients</span>
      </li>
      <li>Containment</li>
      <li>:focus-visible</li>
      <li>:focus-within</li>
      <li className="highlight">
        <span>Logical Properties</span>
      </li>
      <li>:is() & :where()</li>
      <li>Reduced Data</li>
      <li>::cue()</li>
    </ul>
  </div>
</div>

---

### Resources

[Slides](https://2021-hover-conf-new-in-css.netlify.app)

---

## Container Queries & The Future of CSS

### Miriam Suzanne, Co-founder, Oddbird

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/miriam-suzanne.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## @layer

@layer is a way to override the cascade, like groupings

Order of priority is based on when it was first used

```css
@layer default {
  /* lowest */
}
@layer theme {
  /* higher */
}
@layer components {
  /* highest */
}
```

---

## @layer

Layers are separate from normal css specificity

But unlayered rules have higher precedence - implied highest layer

---

## @layer

Styles can be added later, but will still have priority of first use

```css
@layer bootstrap {
  .box {
    color: red;
  }
}

@layer components {
  .box {
    color: blue;
  }
}

/* styles in components layer will still take precedence */
@import url(bootstrap-purple-box.css) layer(bootstrap);
```

---

## @scope

Flexible Scoped CSS

Proposed @scope rule - still being discussed

From root element to lower bound are affected

```css
@scope (.media) to (.content) {
  a {
    color: #f00;
  }
}
```

---

## Container Queries

Like media queries, but based on container width, not screen

Needs a `container-type` property on the parent

```css
container-type: inline-size;
```

Then can use the @container rule

```css
@container (min-width: 30em) {
```

---

## Container Queries - Full example

```css
.card {
  /* a container for every card */
  container-type: inline-size;
  flex: 1 1 min(100%, 20em);
}

/* the card can't query itself so we add an element directly inside */
article {
  flex: 1;
  display: grid;
  grid-template: 'img' 8em 'content' auto / 100%;
  gap: 1em;
  padding: 1em;
}

/* change the grid template when the card is larger! */
@container (min-width: 30em) {
  article {
    grid-template: 'img content' auto / minmax(5em, 10em) 1fr;
  }
}
```

---

## Resources

[Slides](https://slides.oddbird.net/css-next/hover/)

[Container Query CodePen](https://codepen.io/mirisuzanne/pen/mdRVMbp)

[Container Query CodePen Collection](https://codepen.io/collection/XQrgJo)

---

## The State of CSS-in-JS

### Mark Dalgleish, Front End Lead, SEEK

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/mark-dalgleish.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## Styled Components and Emotion are the big two

---

## Goober

Similar api to SC / Emotion

< 1kb

Benchmark

SC - 15000
Emotion - 104000
Goober - 200000

https://goober.js.org/

---

## Goober - Code Example

```jsx
import React from 'react';
import { styled, setup } from 'goober';

// Should be called here, and just once
setup(React.createElement);

const Button = styled('button')`
  background: dodgerblue;
  border: ${Math.random()}px solid white;

  &:hover {
    padding: 1em;
  }

  .otherClass {
    margin: 0;
  }

  ${Icon} {
    color: black;
  }
`;
```

---

## Stitches

From Modulz

Declare variants

Not as flexible as styled components, but more declarative

Good Typescript support

Good for static extraction too

https://stitches.dev/

---

## Stitches - Code Example

```jsx
const Button = styled('button', {
  backgroundColor: 'gainsboro',
  borderRadius: '9999px',
  fontSize: '13px',
  border: '0',
});

() => <Button>Button</Button>;
```

---

## Stitches - Variant Code Example

```jsx
const Button = styled('button', {
  // base styles

  variants: {
    color: {
      violet: {
        backgroundColor: 'blueviolet',
        color: 'white',
        '&:hover': {
          backgroundColor: 'darkviolet',
        },
      },
      gray: {
        backgroundColor: 'gainsboro',
        '&:hover': {
          backgroundColor: 'lightgray',
        },
      },
    },
  },
});

() => <Button color="violet">Button</Button>;
```

---

## vanilla-extract

By Seek Open Source guys incl Mark Dalgleish

Goal to have zero dep library

Like CSS Modules but written in Typescript not CSS

CSS variables will have type checking

Minimal abstraction over CSS

https://vanilla-extract.style/

---

## vanilla-extract - Code Example

styles.css.ts - file won't be in final bundle - compiles to static CSS
.element {
width: clamp(200px, 50%, 1000px);
}

```tsx
import { createTheme, style } from '@vanilla-extract/css';

export const [themeClass, vars] = createTheme({
  color: {
    brand: 'blue',
    white: '#fff',
  },
  space: {
    small: '4px',
    medium: '8px',
  },
});

export const hero = style({
  backgroundColor: vars.color.brandd, // type error
  color: vars.color.white,
  padding: vars.space.large, // type error
});
```

---

## Compiled

From Atlassian

Extracts them to atomic styles, then extracted to static CSS file

Uses CSS variables for props

Needs to be statically analysable, but if it can't extract it, it falls back to a runtime

https://compiledcssinjs.com/

---

## Compiled - Code Example - styled

```jsx
import { styled } from '@compiled/react';

export const Button = styled.button`
  border: none;
  border-radius: 3px;
  padding: 8px 10px;
  background-color: #6554c0;
  color: #fff;
  font-weight: 400;
  font-family: arial;
  font-size: 14px;

  :hover {
    background-color: #8777d9;
  }

  :active {
    background-color: #5243aa;
  }
`;
```

---

## Compiled - Code Example - css prop and extraction

<div style={{display: 'flex', gap: '32px'}}>

```jsx
import '@compiled/react';

export const LargeText = (props) => (
  <span
    css={{
      color: props.color,
      fontSize: 48,
    }}
    data-testid="large-hot-pink"
  >
    {props.children}
  </span>
);

<LargeText color="pink">Hello world</LargeText>;
```

<div>

```jsx
export const LargeHotPinkText = (props) => (
  <span
    style={{ '--_kmurgp': props.color }}
    className="_syaz4rde _1wybfyhu"
    data-testid="large-hot-pink"
  >
    {props.children}
  </span>
);
```

```css
._1wybfyhu {
  font-size: 48px;
}
._syaz4rde {
  color: var(--_kmurgp);
}
```

</div>
</div>

---

## CSS Aspect Ratio

### Anton Ball, Front End Developer, Doist

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/anton-ball.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## How we do it now

Padding top hack <br />
Padding in percentages is based on width

```css
/* 16:9 because 9 / 16 = .5625 */
padding-top: 56.25%;
```

---

## The New Way

Aspect Ratio part of CSS Box Sizing Module Level 4

https://caniuse.com/mdn-css_properties_aspect-ratio

Chromium: 88+

```css
aspect-ratio: auto | <ratio>`;
```

---

<LiveCode
  size="medium"
  title="Aspect ratio - Demo"
  editorProps={{
    onKeyDown: (e) => e.nativeEvent.stopImmediatePropagation(),
  }}
  code={`
  <div style={{ padding: '1rem' }}>
    <div style={{
      maxHeight: '600px',
      background: '#5a4cdb',
      color: '#fff',
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
      aspectRatio: '16 / 9'
    }}>
      Hi
    </div>

  </div>
`}
/>

---

## Part of Web Compat 2021

Google is working with other browser vendors and industry partners

Goal is to eliminate the top five browser compatibility pain points for web developers.

The areas of focus are CSS flexbox, CSS Grid, position: sticky, aspect-ratio, and CSS transforms

https://web.dev/compat2021

---

## CSS Variables for Real Life

### Matt Colman, Senior Software Engineer, Atlassian

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/matt-colman.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## Real Life Situation #1 - JIRA Deployments View

Keep border and background colours in sync as they vary, also when hovering

<Image
  src="https://res.cloudinary.com/zorfling/image/upload/v1627473071/jira_fkn0rh.png"
  style={{ width: '600px', height: '300px' }}
/>

---

## Real Life Situation #2 - Domain Design System Typography

Domain basically had media queries wherever there was text.

Reduce nested media queries for typography - fix it once, use it everywhere

<div style={{display: 'flex', gap: '32px'}}>

```jsx
const globalStyles = css`
  body {
    --h700-font-size: 14px;
    --h700-font-weight: 700;

    @media (min-width: 550px) {
      --h700-font-size: 30px;
      --h700-font-weight: 600;
    }
    @media (min-width: 800px) {
      --h700-font-size: 50px;
      --h700-font-weight: 400;
    }
  }
`;
```

```jsx
const typography = {
  h700: css`
    font-size: var(--h700-font-size);
    font-weight: var(--h700-font-weight);
  `,
};

const h1Style = css`
  ${typography.h700};
  width: 200px;
  height: 200px;
  background-color: pink;
`;
```

</div>

https://codesandbox.io/s/variable-font-size-css-variables-174rf?file=/src/App.js

---

## Real Life Situation #3 - Design System Tokens

Figma workflow - CSS variables show in dev tools, which makes it easier to eyeball design tokens

<Image
  src="https://res.cloudinary.com/zorfling/image/upload/v1627474154/jira-vars_ev8u5j.png"
  style={{ height: '400px', width: '1000px' }}
/>

---

## Typography superpower with variable fonts and CSS

### Ananya Neogi, Front End Developer, Shopify

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/ananya-neogi.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## What are variable fonts?

Something that's like a single font file that behaves like multiple fonts.

---

## How do they look?

```css
h1 {
  /* weight */
  font-variation-settings: 'wght' 705; // usual font weights

  /* width */
  font-variation-settings: 'wdth' 75; // numeric varies by font

  /* italics */
  font-variation-settings: 'ital' 0.25; // 0 - 1

  /* slant - more control - angle of italicsness */
  font-variation-settings: 'slnt' 6; // numeric varies by font

  /* optical size */
  font-variation-settings: 'opsz' 14; // numeric varies by font
}
```

---

## Variable Fonts - Demo

https://v-fonts.com/

---

## Understanding display

### Rachel Andrew, Speaker, MDN Author, CSSWG Member

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/rachel-andrew.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## Everything is boxes

Boxes can be block, or inline

Flex boxes are block, with flex children

Grid boxes are block with children in a grid formatting context

---

## Two value display syntax

There is a two value syntax for display that can make clearer what's going on

| Old          | New              |
| ------------ | ---------------- |
| block        | block flow       |
| flow-root    | block flow-root  |
| inline       | inline flow      |
| inline-block | inline flow-root |
| flex         | block flex       |
| inline-flex  | inline flex      |
| grid         | block grid       |
| inline-grid  | inline grid      |

---

## Resources

[Slides](https://noti.st/rachelandrew/VeraEX/understanding-display)

---

## Neurodiversity (and why you hate CSS)

### Facundo Corradini, Independent Front End Developer

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/facundo-corradini.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## CSS is part-way between designer and developer brain

Designers are commonly Visual-Spatial.

Programmers are commonly Logical-Mathematical… but CSS sits in between.

Is it a design task? Is it a coding task? It’s both!

---

## The New CSS Logical Properties

### Elad Shechter, Independent CSS/HTML Architect

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/elad-shechter.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## Logical properties get away from directional naming

Top and bottom are the Block Axis

`top` = `block-start`<br />
`bottom` = `block-end`

Left and right are the Inline Axis

`left` = `inline-start`<br />
`right` = `inline-end`

---

## Margins

`margin-top` = `margin-block-start`

`margin-bottom` = `margin-block-end`

`margin-left` = `margin-inline-start`

`margin-right` = `margin-inline-end`

---

## Width and Height

`width` = `inline-size`<br />
`max-width` = `max-inline-size`

`height` = `block-size`<br />
`max-height` = `max-block-size`

---

## Positions

`top` = `inset-block-start`<br />
`bottom` = `inset-block-end`

`left` = `inset-inline-start`<br />
`right` = `inset-inline-end`

But this means we get a new shorthand:

```css
top: 0;
left: 0;
bottom: 0;
right: 0;

/* OR */

inset: 0;
```

---

## Resources

[Slides](https://docs.google.com/presentation/d/1p4iUSyWolqlG_g39sXWKQ1PTVW2jzdMtnPb_F8tQe8k/)

---

## Beyond responsive design: new and future media queries

### Kilian Valkhof, Browser Developer, Polypane

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/kilian-valkhof.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## prefers-color-scheme

```css
@media (prefers-color-scheme: dark) {
  /* wants dark mode */
}

@media (prefers-color-scheme: light) {
  /* wants light mode */
}
```

---

## prefers-color-scheme - cheat's dark mode

```css
@media (prefers-color-scheme: dark) {
  :root {
    background: #111;
    filter: invert(1) hue-rotate(180deg);
  }

  img,
  video {
    filter: invert(1) hue-rotate(180deg);
  }
}
```

---

## prefers-reduced-motion

```css
@media (prefers-reduced-motion: reduce) {
  /* wants reduced motion */
}

@media (prefers-reduced-motion: no-preference) {
  /* doesn't want reduced motion */
}
```

---

## prefers-reduced-motion - cheat's reduced motion

```css
@media (prefers-reduced-motion: reduce) {
  body *,
  body *::before,
  body *::after {
    animation-delay: -1ms !important;
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 1ms !important;
    transition-delay: -1ms !important;
    scroll-behavior: auto !important;
    background-attachment: initial !important;
  }
}
```

---

## prefers-contrast (partial support in Safari)

```css
@media (prefers-contrast: high) {
  /* wants high contrast*/
}

@media (prefers-contrast: no-preference) {
  /* doesn't mind  */
}

@media (prefers-contrast: low) {
  /* wants low contrast*/
}
```

---

## prefers-reduced-transparency (no support)

```css
@media (prefers-reduced-transparency: reduce) {
  /* wants reduced transparency */
}

@media (prefers-reduced-transparency: no-preference) {
  /* doesn't want reduced transparency */
}
```

---

## prefers-reduced-data (no support)

```css
@media (prefers-reduced-data: reduce) {
  /* wants reduced data usage */
}

@media (prefers-reduced-data: no-preference) {
  /* doesn't want reduced data usage */
}
```

---

## CSS Comparison Functions

### Ahmad Shadeed, UX Designer, Front End Developer, Uxable

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/ahmad-shadeed.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## min()

```css
.element {
  /* minimum of 50% or 500px */
  width: min(50%, 500px);
}
```

---

## max()

```css
.element {
  /* maximum of 50% or 500px */
  width: max(50%, 500px);
}
```

---

## clamp()

```css
.element {
  /* at least 200px, preferred 50%, and at most 1000px */
  width: clamp(200px, 50%, 1000px);
}
```

clamp can also use math expressions without calc()

```css
.title {
  font-size: clamp(12px, 10 * (1vw + 1vh) / 2, 100px);
}
```

---

## Resources

[Article](https://ishadeed.com/article/css-min-max-clamp/)

---

## Move over TypeScript, here comes TypedCSS!

### Rhiana Heath, Software Engineer, Blake eLearning

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/rhiana-heath.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## Houdini

TypedCSS under Houdini - Typed Object Model (Typed OM)

---

## attributeStyleMap.get()

```css
.foo {
  width: 500px;
}
```

```js
const foo = document.querySelector('.foo');

foo.css('width');
// "500px"

foo.attributeStyleMap.get('width');
// CSSUnitValue {
//   value: 500,
//   unit: 'px'
// }
```

---

## attributeStyleMap.set()

```js
foo.attributeStyleMap.set('width', CSS.percent(50));
```

---

## CSSMathSum

```js
const sum = new CSSMathSum(CSS.percent(100), CSS.px(20));

CSS.vw(100).add(sum).toString();
// "calc(100vw + (100% + 20px))"

foo.attributeStyleMap.set('width', sum);
```

---

## computedStyleMap()

```css
.foo {
  width: calc(100vw + (!00% + 20px));
}
```

```js
const cs = foo.computedStyleMap();

cs.get('width');
// CSSMathSum {
//   operator: 'sum',
//   length: 3,
//   values: CSSNumericArray {
//     0: CSSUnitValue { value: 100, unit: 'vw' },
//     1: CSSUnitValue { value: 100, unit: 'percent' },
//     2: CSSUnitValue { value: 20, unit: 'px' },
//   },
// }
```

---

## CSSStyleValue.parse()

```js
try {
  const css = CSSStyleValue.parse('width', 'CSS.px(not a value)');
  // use css
} catch (error) {
  console.error(`${error}: please supply a valid width value`);
}
```

---

## Resources

[Slides](https://slides.com/rhianaheppenstall/move-over-typescript-here-comes-typedcss)
[CodePens](https://codepen.io/Rumyra/pen/99bc930f82fe908346254df5354066b4?editors=0110)

---

## How To Draw, With CSS

### Michal Porag, Front End Developer, Outbrain

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/michal-porag.jpg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## Drawing Pikachu

<Image
  src="https://res.cloudinary.com/zorfling/image/upload/v1627479168/Screen_Shot_2021-07-28_at_11.32.24_pm_ekwkuu.png"
  style={{ width: '400px', height: '400px' }}
/>

https://codepen.io/michalporag/pen/LYRwgwZ

---

## Drawing a Single Div Kite

<Image
  src="https://res.cloudinary.com/zorfling/image/upload/v1627479399/Screen_Shot_2021-07-28_at_11.36.24_pm_vpwcs3.png"
  style={{ width: '400px', height: '400px' }}
/>

https://codepen.io/michalporag/pen/oNBzZqL

---

## Resources

[CodePens](https://codepen.io/michalporag/pens/public)

---

## A special Webbed Briefs

### Heydon Pickering, Designer, Developer, HeydonWorks

<Image
  src="https://res.cloudinary.com/zorfling/image/fetch/c_fill,g_face,h_300,w_300/f_auto/q_auto/https://webdirections.org/event-common-images/speakers/heydon-pickering.svg"
  style={{
    width: '300px',
    height: '300px',
  }}
></Image>

---

## Six ways to draw a line on the web

1. The Horizontal Rule
2. Scalable Vector Graphics
3. UTF-8 encoded SVG background images
4. Repeating linear-gradients
5. Houdini paint worklets
6. WebGL

https://briefs.video/videos/how-do-i-draw-a-line/

---

## Final Resources

- [Ben Buchanan's Big Stonking Post™](https://weblog.200ok.com.au/2021/05/hover-21-big-stonking-post.html)
- [Hover Site](https://webdirections.org/hover/)

---

## The End
